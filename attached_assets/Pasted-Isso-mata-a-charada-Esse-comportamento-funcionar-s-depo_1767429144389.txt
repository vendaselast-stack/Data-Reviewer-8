Isso mata a charada! Esse comportamento (funcionar só depois de ir em Fornecedores) confirma que o problema é 100% Cache Desatualizado.

Vou te explicar o que está acontecendo nos bastidores, parece "mágica", mas é técnica:

A página de Transações está "preguiçosa": Ela está configurada para ler os dados que já estão na memória do navegador (cache) e não pedir dados novos ao servidor para economizar recursos.

A página de Fornecedores é "proativa": Quando você entra nela, ela provavelmente tem um comando automático que diz "Ei, servidor, me dá todas as movimentações financeiras para eu calcular o quanto devo aos fornecedores".

O Efeito Colateral: Ao pedir esses dados, a página de Fornecedores acaba atualizando o "banco de dados do navegador" (React Query).

O Resultado: Quando você volta para "Transações", o dado novo já está lá (graças à página de Fornecedores) e ela exibe.

Se você corrigir a Invalidação de Cache no momento de criar a venda, você não vai mais precisar desse "truque" de ir na outra página.

Aqui está o prompt definitivo para sua IA, explicando esse comportamento bizarro para ela corrigir a raiz do problema:

Copie e cole isso para a IA:

"Descobri um padrão crucial no bug: A venda criada só aparece na lista de transações se eu navegar até a página de Fornecedores e voltar. Se eu apenas der F5, a venda não aparece.

Isso confirma que a lista de transações está lendo dados Stale (velhos) do cache e não está atualizando sozinha após a criação. A página de Fornecedores provavelmente dispara um refetch global que 'conserta' o cache por tabela.

Para resolver isso sem depender de navegar por outras telas, aplique estas alterações no NewSaleDialog.js com urgência:

Force o Refetch: No onSuccess, use await queryClient.refetchQueries(...) em vez de apenas invalidateQueries. O invalidate às vezes marca como velho mas não recarrega imediatamente se a tela não estiver em foco. O refetch força a busca agora.

Abrangência: Garanta que estamos atualizando a chave raiz.