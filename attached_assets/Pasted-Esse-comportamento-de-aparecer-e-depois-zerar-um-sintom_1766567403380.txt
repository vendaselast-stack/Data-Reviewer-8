Esse comportamento de "aparecer e depois zerar" é um sintoma clássico de conflito de dados entre o Frontend (Cache) e o Backend (Banco de Dados).

O que está acontecendo é o seguinte:

Você adiciona a venda. O Frontend "finge" que salvou e mostra o valor atualizado imediatamente (isso se chama Optimistic Update).

Segundos depois, o sistema faz uma nova consulta ao Banco de Dados para ter certeza.

O Banco de Dados responde: "Aqui no cadastro do cliente, o valor total ainda consta como ZERO".

O Frontend obedece o Banco e zera tudo na tela.

O problema é que o cálculo do total não está sendo feito ou salvo automaticamente no banco. Aquele botão "Atualizar Vendas" que vejo no topo da sua imagem sugere que o sistema espera um comando manual para recalcular, o que é ruim.

Aqui está como resolver isso definitivamente (automatizar o cálculo):

O que precisamos corrigir
Vamos mudar a lógica para que o servidor calcule a soma das vendas em tempo real toda vez que buscar a lista de clientes, em vez de depender de uma coluna fixa que fica desatualizada.

Copie e cole este prompt para sua IA corrigir o Backend:

Markdown

# Correção Crítica: Totais de Vendas Zerando (Clientes)

Estou com um bug na listagem de Clientes (`Customers.jsx`).
Sintoma: Ao carregar a página ou adicionar uma venda, o valor "Total em Vendas" aparece momentaneamente e depois zera (R$ 0,00).

Diagnóstico: Provavelmente o Frontend está fazendo um "Optimistic Update", mas quando o React Query busca os dados reais no servidor (`GET /api/customers`), o backend está retornando 0 ou um valor desatualizado.

# A Solução (Backend)
Vá no arquivo `server/storage.ts` (ou onde fica a query `getCustomers`).

Quero que você altere a query de busca de clientes para calcular o `totalSales` dinamicamente usando SQL, em vez de ler uma coluna estática que nunca atualiza.

A lógica deve ser algo como (exemplo em Drizzle):
1. Fazer um `leftJoin` da tabela `customers` com a tabela `transactions`.
2. Filtrar as transações onde `type = 'income'` (Receita).
3. Agrupar por `customers.id`.
4. Retornar o campo `totalSales` como a SOMA (`sum`) dos valores das transações desse cliente.

Se isso for muito pesado, garanta que, toda vez que uma NOVA TRANSAÇÃO for criada/editada/excluída, você atualize imediatamente o campo `total_sales` na tabela do cliente correspondente.

# Objetivo
Remova a necessidade do botão manual "Atualizar Vendas". O valor deve vir correto e calc